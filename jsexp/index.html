<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
  <title>Starter Template - Materialize</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
</head>
<body>
  <nav class="light-blue lighten-1" role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" href="#" class="brand-logo">JS Expression Engine</a>
      <ul class="right hide-on-med-and-down">
        <li><a href="#"></a></li>
      </ul>
     
      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
  </nav>
  <div class="section no-pad-bot" id="index-banner">
    <div class="container">
      <br><br>     
      <div class="row center">
         
        <div class="row">
          <div class="col s12">
            <ul class="tabs">
              <li class="tab col s3"><a href="#test1">Yes/No</a></li>
              <li class="tab col s3"><a  href="#test2">Num/Demo</a></li>
              <li class="tab col s3"><a href="#test3">Multichoice</a></li>
              <li class="tab col s3"><a href="#test4">Volume</a></li>
              <li class="tab col s3"><a href="#test5" class="active">TextInput</a></li>
            </ul>
          </div>
          <div id="test1" class="col s12">Yes/No</div>
          <div id="test2" class="col s12">
          
            <div class="row">
                  <div class="col s12">
                    
                    <div class="card blue-grey darken-1">
                      <div class="card-content white-text">
                        <span class="card-title">Num /Denom</span>
                        <p> Denom	&lt; 25	0, Rate	$gt;=95%	3, rate	&gt;=80%	2, rate	&lt;80%	0, Optout		0</p>
                      </div>                     
                    </div>                    
                  
                   </div>
                  <div class="col s8">
                      <div class="row">
                       <div class="input-field col s12">
                        <textarea   class="materialize-textarea" id="ndJSON">                         
{ "func":"genNumberND",                        
  "params":["rate","num","denom"],
  "config":[
		   {                   
			  "exp":{"left":"denom", "right":25, "operator":"<"},
			  "rslt":0
		   },
		   {
			  "exp":{"left":"rate", "right":95, "operator":">"},
			  "rslt":3
		   },
		   {
			  "type":"and",
					 "exp":[
							  {"left":"rate", "right":95, "operator":"<"},
							  {"left":"rate", "right":80, "operator":">="}
					 ],
			  "rslt":2
		   },
		   {                    
			  "exp":{"left":"rate", "right":80, "operator":"<"},
			  "rslt":0
		   }
	]
}                    
                         </textarea>
                        <label for="textarea1">JSON Metadata(Change only 'rslt' value)</label>
                      </div>
                      </div>
                  </div>                 
                  <div class="col s4">
                    <div class="row">
                         <div class="input-field col s12">
                          <input placeholder="Enter numerator" id="ndInputN" type="text" class="validate">
                          <label for="first_name">Numerator</label>
                        </div>
                         <div class="input-field col s12">
                          <input placeholder="Enter denominator" id="ndInputD" type="text" class="validate">
                          <label for="first_name">Denominator</label>
                        </div>
                        <div class="input-field col s12">
                          <input placeholder="Rate(calculated)" id="ndInputR" readonly type="text" class="validate">
                          <label for="first_name">Rate</label>
                        </div>
                         <div class=" col s12">
                           <button class="btn waves-effect waves-light" id="ndEval" type="submit" name="action">Evaluate
                             <i class="material-icons right">send</i>
                          </button>
                       </div>
                      </div>                   
                   </div>
                   
                    <div class="col s12">
                    
                    <div class="card lime lighten-2">
                      <div class="card-content left-align">
                        <span class="card-title">Result:</span>
                        <p id="rslt2"></p>
                        <p id="rslt2Exp"></p>
                      </div>                     
                    </div>                    
                  
                   </div>
                   
                </div>
          
          
          </div>
          <div id="test3" class="col s12">Test 3</div>
          <div id="test4" class="col s12">Test 4</div>
          <div id="test5" class="col s12">
                 <div class="row">
                  <div class="col s12">
                    
                    <div class="card blue-grey darken-1">
                      <div class="card-content white-text">
                        <span class="card-title">TextInput / Services / Contacts</span>
                        <p> Data Submitted = 3 , Not Answered = 0</p>
                      </div>                     
                    </div>                    
                  
                   </div>
                  <div class="col s5">
                      <div class="row">
                       <div class="input-field col s12">
                        <textarea   class="materialize-textarea" id="txtJSON">                         
{
  "func": "validData",
  "params": [
      "input"
  ],
  "config": {
      "rslt": 3
  }
}                        
                         </textarea>
                        <label for="textarea1">JSON Metadata(Change only 'rslt' value)</label>
                      </div>
                      </div>
                  </div>
                  <div class="col s2">
                       <button class="btn waves-effect waves-light" id="txtEval" type="submit" name="action">Evaluate
                         <i class="material-icons right">send</i>
                      </button>
                   </div>
                  <div class="col s5">
                    <div class="row">
                       <div class="input-field col s12">
                        <input placeholder="Enter input value here" id="txtInput" type="text" class="validate">
                        <label for="first_name">Input</label>
                      </div>
                      </div>                   
                   </div>
                   
                    <div class="col s12">
                    
                    <div class="card lime lighten-2">
                      <div class="card-content left-align">
                        <span class="card-title">Result:</span>
                        <p id="rslt5"></p>
                      </div>                     
                    </div>                    
                  
                   </div>
                   
                </div>
           </div>
        </div>    

    </div>
    </div>


  <!--  Scripts-->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script type="text/javascript" src="bower_components/materialize/dist/js/materialize.min.js"></script>
    <script type="text/javascript" src="base_lib.js"></script>
  <script src="js/init.js"></script>
 <script type="text/javascript" >
       $(document).ready(function(){
          $('ul.tabs').tabs();
         
          $("#ndEval").click(function(){
          
               var jsontext = $("#ndJSON").val();
               var metadata = JSON.parse( jsontext );
               var denom = $("#ndInputD").val();
              var nume = $("#ndInputN").val();
          
             var numVal = parseInt(nume);
             var denVal = parseInt(denom);
             var rate = numVal / denVal;
           
              $("#ndInputR").val(rate);
          
              var input = {rate: rate, num:40, denom:30 };
              console.log(metadata);
              console.log(input);
          
             var rslt = evalExpressionObj( metadata, input );
             console.log("Result:"+rslt);
              $("#rslt2").html(rslt);
          
          $("#rslt2Exp").html(EvelLib.genExpImpl(metadata.config));
          
              
          });
          
          $("#txtEval").click(function(){
           
            var jsonstr = $("#txtJSON").val();
            var metadata = JSON.parse(jsonstr);
            var val = $.trim($("#txtInput").val());            
            var valobj = val.length > 0 ? {input:val} : null;
            
            console.log(metadata);
            console.log(valobj); 
            
            var data = evalExpressionObj( metadata, valobj);
            console.log(data);
            $("#rslt5").html(data);
          });
         
        });
      </script>
  </body>
</html>
